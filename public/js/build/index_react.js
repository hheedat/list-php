webpackJsonp([2],{0:function(e,t,n){"use strict";var r=n(20),a=n(171),o=n(172),i=r.createClass({displayName:"LoginRegisterBox",render:function(){return r.createElement("div",null,r.createElement(a,{urlLogin:"/index/login",urlRedirect:"/list"}),r.createElement(o,{urlRegister:"/index/register",urlRedirect:"/list"}))}});r.render(r.createElement(i,null),document.getElementById("wrapper"))},171:function(e,t,n){"use strict";var r=n(20),a=n(25),o=(n(1),r.createClass({displayName:"LoginBox",checkFlag:!1,mail:"",pwd:"",getInitialState:function(){return{warning:{},applyMsg:{apply:""}}},submit:function(){return this.checkFlag=!0,this.isInputLegal()?a.ajax({url:this.props.urlLogin,method:"post",dataType:"json",data:{mail:this.mail,pwd:this.pwd}}).done(function(e){0==e.errno?(this.setState({warning:{apply:""},applyMsg:{apply:e.msg}}),setTimeout(function(){window.location.href=this.props.urlRedirect}.bind(this),100)):this.setState({warning:{apply:e.msg}})}.bind(this)).fail(function(e,t,n){console.error(this.props.url,t,n),this.setState({warning:{apply:"出现了一些问题"}})}):void 0},isInputLegal:function(){if(!this.checkFlag)return!1;var e=this.mail=this.refs.mail.getDOMNode().value.trim(),t=this.pwd=this.refs.pwd.getDOMNode().value.trim(),n=/^\s*$/,r=/^.+\@.+$/,a=!0;return n.test(e)?(this.setState({warning:{mail:"请输入您的邮箱"}}),!1):r.test(e)?(this.setState({warning:{mail:""}}),n.test(t)?(this.setState({warning:{pwd:"请输入您的密码"}}),!1):(this.setState({warning:{pwd:""}}),a)):(this.setState({warning:{mail:"您输入的不是一个合法的邮箱"}}),!1)},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){return r.createElement("div",{className:"main-box"},r.createElement("h4",null,"登录"),r.createElement("div",{className:"login-box"},r.createElement("div",{className:"item"},r.createElement("label",{htmlFor:"mail"},"邮箱 : "),r.createElement("input",{ref:"mail",type:"text",id:"mail",onChange:this.isInputLegal,placeholder:"登录邮箱"}),r.createElement("p",{className:"warning"},this.state.warning.mail)),r.createElement("div",{className:"item"},r.createElement("label",{htmlFor:"pwd"},"密码 : "),r.createElement("input",{ref:"pwd",type:"password",name:"pwd",onChange:this.isInputLegal,placeholder:"登录密码"}),r.createElement("p",{className:"warning"},this.state.warning.pwd)),r.createElement("div",{className:"item"},r.createElement("button",{className:"btn",onClick:this.submit},"登录"),r.createElement("p",{className:"warning"},this.state.warning.apply),r.createElement("p",{className:"msg"},this.state.applyMsg.apply))))}}));e.exports=o},172:function(e,t,n){"use strict";var r=n(20),a=n(25),o=(n(1),r.createClass({displayName:"RegisterBox",checkFlag:!1,mail:"",pwd:"",username:"",getInitialState:function(){return{warning:{},applyMsg:{}}},submit:function(){return this.checkFlag=!0,this.isInputLegal()?a.ajax({url:this.props.urlRegister,method:"post",dataType:"json",data:{mail:this.mail,pwd:this.pwd,name:this.username}}).done(function(e){0==e.errno?(this.setState({applyMsg:{apply:e.msg}}),setTimeout(function(){window.location.href=this.props.urlRedirect}.bind(this),100)):this.setState({warning:{apply:e.msg}})}.bind(this)).fail(function(e,t,n){console.error(this.props.url,t,n),this.setState({warning:{apply:"出现了一些问题"}})}):void 0},isInputLegal:function(){if(!this.checkFlag)return!1;var e=this.mail=this.refs.mail.getDOMNode().value.trim(),t=this.pwd=this.refs.pwd.getDOMNode().value.trim(),n=this.username=this.refs.username.getDOMNode().value.trim(),r=/^\s*$/,a=/^.+\@.+$/,o=!0;return r.test(n)?(this.setState({warning:{username:"请输入您的用户名"}}),!1):(this.setState({warning:{username:""}}),r.test(e)?(this.setState({warning:{mail:"请输入您的邮箱"}}),!1):a.test(e)?(this.setState({warning:{mail:""}}),r.test(t)?(this.setState({warning:{pwd:"请输入您的密码"}}),!1):t.length<6?(this.setState({warning:{pwd:"密码必须大于6位"}}),!1):(this.setState({warning:{pwd:""}}),o)):(this.setState({warning:{mail:"您输入的不是一个合法的邮箱"}}),!1))},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){return r.createElement("div",{className:"main-box"},r.createElement("h4",null,"注册"),r.createElement("div",{className:"register-box"},r.createElement("div",{className:"item"},r.createElement("label",{htmlFor:"username"},"用户名 : "),r.createElement("input",{ref:"username",type:"text",id:"username",onChange:this.isInputLegal,placeholder:"用户名"}),r.createElement("p",{className:"warning"},this.state.warning.username)),r.createElement("div",{className:"item"},r.createElement("label",{htmlFor:"mail"},"邮箱 : "),r.createElement("input",{ref:"mail",type:"text",id:"mail",onChange:this.isInputLegal,placeholder:"登录邮箱"}),r.createElement("p",{className:"warning"},this.state.warning.mail)),r.createElement("div",{className:"item"},r.createElement("label",{htmlFor:"pwd"},"密码 : "),r.createElement("input",{ref:"pwd",type:"password",name:"pwd",onChange:this.isInputLegal,placeholder:"登录密码"}),r.createElement("p",{className:"warning"},this.state.warning.pwd)),r.createElement("div",{className:"item"},r.createElement("button",{className:"btn",onClick:this.submit},"注册"),r.createElement("p",{className:"warning"},this.state.warning.apply),r.createElement("p",{className:"msg"},this.state.applyMsg.apply))))}}));e.exports=o}});